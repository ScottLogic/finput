!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.finput=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){c=b.exports=function(a){if(a&&"object"==typeof a){var b=a.which||a.keyCode||a.charCode;b&&(a=b)}if("number"==typeof a)return g[a];var c=String(a),f=d[c.toLowerCase()];if(f)return f;var f=e[c.toLowerCase()];return f?f:1===c.length?c.charCodeAt(0):void 0};var d=c.code=c.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,"delete":46,command:91,"right click":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=c.aliases={windows:91,"⇧":16,"⌥":18,"⌃":17,"⌘":91,ctl:17,control:17,option:18,pause:19,"break":19,caps:20,"return":13,escape:27,spc:32,pgup:33,pgdn:33,ins:45,del:46,cmd:91};for(f=97;123>f;f++)d[String.fromCharCode(f)]=f-32;for(var f=48;58>f;f++)d[f-48]=f;for(f=1;13>f;f++)d["f"+f]=f+111;for(f=0;10>f;f++)d["numpad "+f]=f+96;var g=c.names=c.title={};for(f in d)g[d[f]]=f;for(var h in e)d[h]=e[h]},{}],2:[function(a,b,c){"use strict";c.ACTION_TYPES={NUMBER:"NUMBER",SHORTCUT:"SHORTCUT",DECIMAL:"DECIMAL",DELIMITER:"DELIMITER",MINUS:"MINUS",UNKNOWN:"UNKNOWN",HORIZONTAL_ARROW:"HORIZONTAL_ARROW",VERTICAL_ARROW:"VERTICAL_ARROW",BACKSPACE:"BACKSPACE",DELETE:"DELETE",UNDO:"UNDO",REDO:"REDO",HOME:"HOME",END:"END"},c.DRAG_STATES={NONE:"NONE",INTERNAL:"INTERNAL",EXTERNAL:"EXTERNAL"},c.RANGE={ALL:"ALL",POSITIVE:"POSITIVE"}},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();c["default"]=function(a,b){if(!a)throw"Input element must be supplied as first argument";var c=new r(a,b||{});return function(){c.removeListeners()}};var h=a("keycode"),i=d(h),j=a("./keyHandlers"),k=d(j),l=a("./helpers"),m=d(l),n=a("./valueHistory"),o=d(n),p=a("./constants"),q={scale:2,range:p.RANGE.ALL,fixed:!0,thousands:",",decimal:".",shortcuts:{k:1e3,m:1e6,b:1e9}},r=function(){function a(b,c){e(this,a),this._element=b,this._options=f({},q,c),this._actionTypes=this.createActionTypes(),this._history=new o["default"],this._listeners={blur:{element:this.element,handler:this.onFocusout.bind(this)},focus:{element:this.element,handler:this.onFocusin.bind(this)},drop:{element:this.element,handler:this.onDrop.bind(this)},paste:{element:this.element,handler:this.onPaste.bind(this)},keydown:{element:this.element,handler:this.onKeydown.bind(this)},input:{element:this.element,handler:this.onInput.bind(this)},dragstart:{element:document,handler:this.onDragstart.bind(this)},dragend:{element:document,handler:this.onDragend.bind(this)}},this.removeListeners();for(var d in this._listeners)this._listeners[d].element.addEventListener(d,this._listeners[d].handler)}return g(a,[{key:"createActionTypes",value:function(){return[{type:p.ACTION_TYPES.NUMBER,names:["0","1","2","3","4","5","6","7","8","9"]},{type:p.ACTION_TYPES.MINUS,names:["-"]},{type:p.ACTION_TYPES.HOME,names:["home"]},{type:p.ACTION_TYPES.END,names:["end"]},{type:p.ACTION_TYPES.DECIMAL,names:[this.options.decimal]},{type:p.ACTION_TYPES.DELIMITER,names:[this.options.thousands]},{type:p.ACTION_TYPES.SHORTCUT,names:Object.keys(this.options.shortcuts)},{type:p.ACTION_TYPES.BACKSPACE,names:["backspace"]},{type:p.ACTION_TYPES.DELETE,names:["delete"]},{type:p.ACTION_TYPES.HORIZONTAL_ARROW,names:["left","right"]},{type:p.ACTION_TYPES.VERTICAL_ARROW,names:["up","down"]},{type:p.ACTION_TYPES.UNDO,names:["z"],ctrl:!0},{type:p.ACTION_TYPES.REDO,names:["y"],ctrl:!0}]}},{key:"getActionType",value:function(a,b){var c=!0,d=!1,e=void 0;try{for(var f,g=this._actionTypes[Symbol.iterator]();!(c=(f=g.next()).done);c=!0){var h=f.value,i=h.names.indexOf(a),j=i>-1;if(j&&(h.ctrl?b.ctrlKey:!0))return h.type}}catch(k){d=!0,e=k}finally{try{!c&&g["return"]&&g["return"]()}finally{if(d)throw e}}return p.ACTION_TYPES.UNKNOWN}},{key:"getRawValue",value:function(a){return Number(this.element.value.replace(new RegExp(this.options.thousands,"g"),""))}},{key:"setValue",value:function(a,b){var c=m["default"].fullFormat(a,this.options);(b?a:!0)&&(this.element.value=c,this.element.rawValue=this.getRawValue(this.element.value),this._history.addValue(c))}},{key:"onFocusout",value:function(a){this.setValue(this.element.value)}},{key:"onFocusin",value:function(a){this.element.selectionStart=0,this.element.selectionEnd=this.element.value.length}},{key:"onDrop",value:function(a){switch(this._dragState){case p.DRAG_STATES.INTERNAL:break;case p.DRAG_STATES.EXTERNAL:var b=m["default"].parseString(a.dataTransfer.getData("text"),this.options);this.setValue(b,!0),a.preventDefault()}}},{key:"onDragstart",value:function(a){this._dragState=a.target===this.element?p.DRAG_STATES.INTERNAL:p.DRAG_STATES.EXTERNAL}},{key:"onDragend",value:function(a){this._dragState=p.DRAG_STATES.NONE}},{key:"onPaste",value:function(a){var b=m["default"].parseString(a.clipboardData.getData("text"),this.options);this.setValue(b,!0),a.preventDefault()}},{key:"onKeydown",value:function(a){var b={event:a,code:a.which||a.keyCode,keyName:(0,i["default"])(a)?(0,i["default"])(a).replace("numpad ",""):null,caretStart:this.element.selectionStart,caretEnd:this.element.selectionEnd,currentValue:this.element.value,newValue:this.element.value},c=this.getActionType(b.keyName,a);switch(c){case p.ACTION_TYPES.NUMBER:k["default"].onNumber(b,this.options);break;case p.ACTION_TYPES.DECIMAL:k["default"].onDecimal(b,this.options);break;case p.ACTION_TYPES.MINUS:k["default"].onMinus(b,this.options);break;case p.ACTION_TYPES.SHORTCUT:k["default"].onShortcut(b,this.options);break;case p.ACTION_TYPES.HORIZONTAL_ARROW:case p.ACTION_TYPES.VERTICAL_ARROW:case p.ACTION_TYPES.HOME:case p.ACTION_TYPES.END:return;case p.ACTION_TYPES.BACKSPACE:k["default"].onBackspace(b,this.options.thousands);break;case p.ACTION_TYPES.DELETE:k["default"].onDelete(b,this.options.thousands);break;case p.ACTION_TYPES.UNDO:return void k["default"].onUndo(this,a);case p.ACTION_TYPES.REDO:return void k["default"].onRedo(this,a);default:return void(a.ctrlKey||a.preventDefault())}var d=m["default"].partialFormat(b.newValue,this.options),e=b.newValue;this.element.value=d,this.element.rawValue=this.getRawValue(this.element.value);var f=m["default"].calculateOffset(e,this.element.value,b.caretStart,this.options),g=b.caretStart+f;this.element.setSelectionRange(g,g),this._history.addValue(d)}},{key:"onInput",value:function(a){this.setValue(this.element.value)}},{key:"removeListeners",value:function(){for(var a in this._listeners)this._listeners[a].element.removeEventListener(a,this._listeners[a].handler)}},{key:"element",get:function(){return this._element}},{key:"options",get:function(){return this._options}}]),a}();b.exports=c["default"]},{"./constants":2,"./helpers":4,"./keyHandlers":5,"./valueHistory":6,keycode:1}],4:[function(a,b,c){"use strict";a("./constants");c.editString=function(a,b,c){var d=arguments.length<=3||void 0===arguments[3]?c:arguments[3],e=a.slice(0,c),f=a.slice(d,a.length);return""+e+b+f},c.formatThousands=function(a,b){var c=a.indexOf(b.decimal)>-1?a.indexOf(b.decimal)-1:a.length-1,d="-"===a[0]?1:0,e=c,f=1;for(f;e>d;e--,f++)f%3===0&&(a=this.editString(a,b.thousands,e));return a},c.partialFormat=function(a,b){return a=a.replace(new RegExp("["+b.thousands+"]","g"),""),a=this.removeleadingZeros(a,b),a=this.removeExtraDecimals(a,b),a=this.formatThousands(a,b)},c.fullFormat=function(a,b){if(a=this.partialFormat(a,b),null==a||""==a)return"";var c=a.indexOf(b.decimal)>-1?a.indexOf(b.decimal):a.length,d="-"===a[0]?a[0]:"",e=a.slice(d?1:0,c),f=a.slice(c+1);return b.fixed?b.scale>0?(f=f.length>=b.scale?f.slice(0,b.scale):f+Array(b.scale-f.length+1).join("0"),e.length||(e="0"),""+d+e+b.decimal+f):""+d+e:a},c.removeleadingZeros=function(a,b){for(var c=a.indexOf(b.decimal)>-1?a.indexOf(b.decimal):a.length,d="-"===a[0]?a[0]:"",e=a.slice(d?1:0,c+1),f=a.slice(c+1),g=0;0==e[g]&&e[g+1]!==b.decimal&&e.length>1;)e=e.slice(0,g)+e.slice(g+1);return""+d+e+f},c.removeExtraDecimals=function(a,b){var c=a.indexOf(b.decimal)>-1?a.indexOf(b.decimal):a.length,d=a.slice(0,c+1),e=a.slice(c+1).slice(0,null==b.scale?e.length:b.scale);return""+d+e},c.calculateOffset=function(a,b,c,d){var e=void 0,f=0,g=0;for(e=0;c>e;e++)a[e]===d.thousands&&f++;for(e=0;c>e;e++)b[e]===d.thousands&&g++;return g-f},c.allowedZero=function(a,b,c,d){if(0!=b)return!0;var e=a.indexOf(d.decimal)>-1?a.indexOf(d.decimal):a.length,f="-"===a[0],g=a.slice(f?1:0,e);return c=f?c-1:c,g.length>0&&c<g.length+1?0==g?!1:c>0:!0},c.toNumber=function(a,b){return a&&Number(a.replace(new RegExp("["+b.thousands+"]","g"),""))},c.parseString=function(a,b){var c=1,d="",e=!0,f=!1,g=void 0;try{for(var h,i=a[Symbol.iterator]();!(e=(h=i.next()).done);e=!0){var j=h.value;isNaN(j)?j===b.decimal&&-1===d.indexOf(j)?d+=b.decimal:b.shortcuts[j]?c*=b.shortcuts[j]:"-"!==j||d.length||(d=j):d+=j}}catch(k){f=!0,g=k}finally{try{!e&&i["return"]&&i["return"]()}finally{if(f)throw g}}if(!d.length)return"";var l=Number(d.replace(new RegExp("["+b.decimal+"]","g"),".")),m=String(l*c).replace(new RegExp("[.]","g"),b.decimal),n=-1!==m.indexOf("e");return n?"":m}},{"./constants":2}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("./constants"),f=a("./helpers"),g=d(f);b.exports={onNumber:function(a,b){var c=g["default"].editString(a.currentValue,"",a.caretStart,a.caretEnd),d=!("-"===a.currentValue[0]&&0===a.caretStart&&0===a.caretEnd)&&g["default"].allowedZero(c,a.keyName,a.caretStart,b);d&&(a.newValue=g["default"].editString(a.currentValue,a.keyName,a.caretStart,a.caretEnd),a.caretStart+=1),a.event.preventDefault()},onMinus:function(a,b){var c=0===a.caretStart&&("-"!==a.currentValue[0]||a.caretEnd>0)&&b.range!==e.RANGE.POSITIVE;c&&(a.newValue=g["default"].editString(a.currentValue,"-",a.caretStart,a.caretEnd),a.caretStart+=1),a.event.preventDefault()},onDecimal:function(a,b){var c=a.currentValue.indexOf(b.decimal),d=b.scale>0&&(-1===c||c>=a.caretStart&&c<a.caretEnd);d&&(a.newValue=g["default"].editString(a.currentValue,b.decimal,a.caretStart,a.caretEnd),a.caretStart+=1),a.event.preventDefault()},onShortcut:function(a,b){var c=b.shortcuts[a.keyName.toLowerCase()]||1,d=g["default"].editString(a.currentValue,"",a.caretStart,a.caretEnd),e=(g["default"].toNumber(d,b)||1)*c;c&&(-1===e.toString().indexOf("e")&&(a.newValue=String(e)),a.caretStart=a.newValue.length+Math.log10(1e3)),a.event.preventDefault()},onBackspace:function(a,b){var c=void 0,d=void 0;if(a.caretStart===a.caretEnd)if(a.event.ctrlKey)c="",d=a.currentValue.slice(a.caretStart,a.currentValue.length),a.caretStart=0;else{var e=1;e=a.caretStart-e>=0?e:0,c=a.currentValue.slice(0,a.caretStart-e),d=a.currentValue.slice(a.caretStart,a.currentValue.length),a.caretStart+=-e}else c=a.currentValue.slice(0,a.caretStart),d=a.currentValue.slice(a.caretEnd,a.currentValue.length);a.newValue=c+d,a.event.preventDefault()},onDelete:function(a,b){var c=void 0,d=void 0;if(a.caretStart===a.caretEnd){var e=a.currentValue[a.caretStart];if(a.event.ctrlKey)c=a.currentValue.slice(0,a.caretStart),d="";else{var f=e===b;a.caretStart+=f?1:0;var g=a.caretStart+(f?0:1);c=a.currentValue.slice(0,a.caretStart),d=a.currentValue.slice(g,a.currentValue.length)}}else c=a.currentValue.slice(0,a.caretStart),d=a.currentValue.slice(a.caretEnd,a.currentValue.length);a.newValue=c+d,a.event.preventDefault()},onUndo:function(a,b){a.element.value=a._history.undo(),a.element.setSelectionRange(a.element.value.length,a.element.value.length),b.preventDefault()},onRedo:function(a,b){a.element.value=a._history.redo(),a.element.setSelectionRange(a.element.value.length,a.element.value.length),b.preventDefault()}}},{"./constants":2,"./helpers":4}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=50,g=function(){function a(){d(this,a),this._history=[null],this._currentIndex=0}return e(a,[{key:"undo",value:function(){return this.currentIndex>0&&this.currentIndex--,this.currentValue}},{key:"redo",value:function(){return this.currentIndex<this.history.length-1&&this.currentIndex++,this.currentValue}},{key:"addValue",value:function(a){return a!==this.currentValue&&(this.history.splice(this.currentIndex+1,null,a),this.history.length>f&&this.history.shift()),this.currentIndex=this.history.length-1,this.currentValue}},{key:"history",get:function(){return this._history},set:function(a){this._history=a}},{key:"currentIndex",get:function(){return this._currentIndex},set:function(a){this._currentIndex=a}},{key:"currentValue",get:function(){return this.history[this.currentIndex]}}]),a}();c["default"]=g,b.exports=c["default"]},{}]},{},[3])(3)});